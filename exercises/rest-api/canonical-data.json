{
    "exercise": "rest-api",
    "version": "1.0.0",
    "comments": [
      "The state of the API database before the request is represented",
      "by the input->database object. Your track may determine how this",
      "initial state is set.",
      "The inputs and outputs are represented as arrays of strings to",
      "improve readability in this JSON file.",
      "Your track may choose whether to present the input as a single",
      "string (concatenating all the lines) or as the list.",
      "In most cases, it seems to make sense to expect the output as",
      "a single string.",
      "Additionally, your track may choose whether to enforce or ignore",
      "whitespace in JSON strings."
    ],
    "cases": [
        {
            "description": "user management",
            "cases": [
                {
                    "description": "no users",
                    "property": "request",
                    "input": {
                        "database": {
                            "users": []
                        },
                        "request_body": ["GET /users"]
                    },
                    "expected": [
                        "{",
                        "\"users\": []",
                        "}"
                    ]
                },
                {
                    "description": "add user",
                    "property": "request",
                    "input": {
                        "database": {
                            "users": []
                        },
                        "request_body": [
                            "POST /add",
                            "",
                            "{",
                            "\"user\": \"Adam\"",
                            "}"
                        ]
                    },
                    "expected": [
                        "{",
                        "\"name\": \"Adam\",",
                        "\"owes\": {},",
                        "\"owed_by\": {},",
                        "\"balance\": 0.0",
                        "}"
                    ]
                },
                {
                    "description": "get single user",
                    "property": "request",
                    "input": {
                        "database": {
                            "users": [
                                {
                                    "name": "Adam",
                                    "owes": {},
                                    "owed_by": {},
                                    "balance": 0.0
                                },
                                {
                                    "name": "Bob",
                                    "owes": {},
                                    "owed_by": {},
                                    "balance": 0.0
                                }
                            ]
                        },
                        "request_body": [
                            "GET /users",
                            "",
                            "{",
                            "\"users\": [\"Bob\"]",
                            "}"
                        ]
                    },
                    "expected": [
                        "{",
                        "\"users\": [",
                        "{",
                        "\"name\": \"Bob\",",
                        "\"owes\": {},",
                        "\"owed_by\": {}",
                        "\"balance\": 0.0",
                        "}",
                        "]",
                        "}"
                    ]
                }

            ]
        },
        {
            "description": "iou",
            "cases": [
                {
                    "description": "both users have 0 balance",
                    "property": "request",
                    "input": {
                        "database": {
                            "users": [
                                {
                                    "name": "Adam",
                                    "owes": {},
                                    "owed_by": {},
                                    "balance": 0.0
                                },
                                {
                                    "name": "Bob",
                                    "owes": {},
                                    "owed_by": {},
                                    "balance": 0.0
                                }
                            ]
                        },
                        "request_body": [
                            "POST /iou",
                            "",
                            "{",
                            "\"lender\": \"Adam\",",
                            "\"borrower\": \"Bob\",",
                            "\"amount\": 3.0",
                            "}"
                        ]
                    },
                    "expected": [
                        "{",
                        "\"users\": [",
                        "{",
                        "\"name\": \"Adam\",",
                        "\"owes\": {},",
                        "\"owed_by\": {",
                        "\"Bob\": 3.0",
                        "},",
                        "\"balance\": 3.0",
                        "},",
                        "{",
                        "\"name\": \"Bob\",",
                        "\"owes\": {},",
                        "\"Adam\": 3.0",
                        "},",
                        "\"owed_by\": {}",
                        "\"balance\": -3.0",
                        "},",
                        "]",
                        "}"
                    ]
                },
                {
                    "description": "borrower has negative balance",
                    "property": "request",
                    "input": {
                        "database": {
                            "users": [
                                {
                                    "name": "Adam",
                                    "owes": {},
                                    "owed_by": {},
                                    "balance": 0.0
                                },
                                {
                                    "name": "Bob",
                                    "owes": {
                                        "Chuck": 3.0
                                    },
                                    "owed_by": {},
                                    "balance": -3.0
                                },
                                {
                                    "name": "Chuck",
                                    "owes": {},
                                    "owed_by": {
                                        "Bob": 3.0
                                    },
                                    "balance": 3.0
                                }
                            ]
                        },
                        "request_body": [
                            "POST /iou",
                            "",
                            "{",
                            "\"lender\": \"Adam\",",
                            "\"borrower\": \"Bob\",",
                            "\"amount\": 3.0",
                            "}"
                        ]
                    },
                    "expected": [
                        "{",
                        "\"users\": [",
                        "{",
                        "\"name\": \"Adam\",",
                        "\"owes\": {},",
                        "\"owed_by\": {",
                        "\"Bob\": 3.0",
                        "},",
                        "\"balance\": 3.0",
                        "},",
                        "{",
                        "\"name\": \"Bob\",",
                        "\"owes\": {},",
                        "\"Adam\": 3.0",
                        "\"Chuck\": 3.0",
                        "},",
                        "\"owed_by\": {}",
                        "\"balance\": -6.0",
                        "},",
                        "]",
                        "}"
                    ]
                },
                {
                    "description": "lender has negative balance",
                    "property": "request",
                    "input": {
                        "database": {
                            "users": [
                                {
                                    "name": "Adam",
                                    "owes": {},
                                    "owed_by": {},
                                    "balance": 0.0
                                },
                                {
                                    "name": "Bob",
                                    "owes": {
                                        "Chuck": 3.0
                                    },
                                    "owed_by": {},
                                    "balance": -3.0
                                },
                                {
                                    "name": "Chuck",
                                    "owes": {},
                                    "owed_by": {
                                        "Bob": 3.0
                                    },
                                    "balance": 3.0
                                }
                            ]
                        },
                        "request_body": [
                            "POST /iou",
                            "",
                            "{",
                            "\"lender\": \"Bob\",",
                            "\"borrower\": \"Adam\",",
                            "\"amount\": 3.0",
                            "}"
                        ]
                    },
                    "expected": [
                        "{",
                        "\"users\": [",
                        "{",
                        "\"name\": \"Adam\",",
                        "\"owes\": {",
                        "\"Bob\": 3.0",
                        "},",
                        "\"owed_by\": {}",
                        "\"balance\": -3.0",
                        "},",
                        "{",
                        "\"name\": \"Bob\",",
                        "\"owes\": {},",
                        "\"Chuck\": 3.0",
                        "},",
                        "\"owed_by\": {",
                        "\"Adam\": 3.0",
                        "}",
                        "\"balance\": 0.0",
                        "},",
                        "]",
                        "}"
                    ]
                }
            ]
        }
    ]
}